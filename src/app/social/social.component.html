<div class="social-container">
  <!-- Friends Sidebar -->
  <div class="friends-sidebar">
    <div class="friends-list">
      <h3>Your Friends</h3>
      <ul class="friends-ul">
        <ng-container *ngIf="friends$ | async as friends">
          <li *ngFor="let friend of friends"
              (click)="openChat(friend)"
              class="friend-item">
            {{ friend.name }} <small>({{ friend.role || 'user' }})</small>
          </li>
          <li *ngIf="!friends.length" class="empty-state">
            <i>No friends yet.</i>
          </li>
        </ng-container>
      </ul>
    </div>

    <!-- Moved notifications to proper location within sidebar -->
    <div class="notifications-section">
      <h3>Notifications</h3>
      <ul class="notifications-ul">
        <ng-container *ngIf="pendingRequests$ | async as requests">
          <li *ngFor="let req of requests" class="notification-item">
            <strong>{{ req.name }}</strong> ({{ req.role }}) sent you a friend request.
            <div class="notification-actions">
              <button (click)="acceptRequest(req)" class="accept-btn">✅ Accept</button>
              <button (click)="rejectRequest(req)" class="reject-btn">❌ Reject</button>
            </div>
          </li>
          <li *ngIf="!requests.length" class="empty-state">
            <i>No pending requests</i>
          </li>
        </ng-container>
      </ul>
    </div>
  </div>

  <!-- Chat Box -->
  <div class="chat-wrapper">
    <h2>Chat</h2>
    <div #talkjsContainer class="chat-container">
      <i *ngIf="!chatbox" class="chat-placeholder">Select a friend to start chatting...</i>
    </div>
  </div>
</div>
